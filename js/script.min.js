'use strict'

$('.anchor').click(function(){
    $('body').animate({
        scrollTop: $( $(this).attr('href') ).offset().top - 70
    }, 500);
    return false;
});

$('.anchor-top').click(function(event){
    event.preventDefault();
    $('body').animate({
        scrollTop: $('body').offset().top
    }, 500);
});

/*var nav = document.getElementsByClassName('scroll')[0];
var scrolled = false;
$(window).scroll(function () {
    if (104 < $(this).scrollTop() && !scrolled) {
        nav.className = 'scroll fixed';
        scrolled = true;
    }

    if (104 > $(this).scrollTop() && scrolled) {
        nav.className = 'scroll';
        scrolled = false;
    }
});*/

$(document).ready(function () {
    $(".collapse-mobile").click(function (e) {
        $('.collapse').closest('.collapse').toggleClass("collapse-hover");
        e.stopPropagation();
    });
    $(document).on('click', function (e) {    
        if (!$(e.target).closest('.collapse-hover').length) $('.collapse').removeClass("collapse-hover");
    });
});
window.onload = function () {
    $('.preloader').fadeOut('slow',function(){$(this).remove();});
}


  $(function(){

    $('table > tbody > tr:odd').addClass('odd');

    $('table > tbody > tr').hover(function(){
      $(this).toggleClass('hover');
    });

    $('#marcar-todos').click(function(){
      $('table > tbody > tr > td > :checkbox')
      .attr('checked', $(this).is(':checked'))
      .trigger('change');
    });

    $('table > tbody > tr > td > :checkbox').bind('click change', function(){
      var tr = $(this).parent().parent();
      if($(this).is(':checked')) $(tr).addClass('selected');
      else $(tr).removeClass('selected');
    });


    $('#pesquisar').keydown(function(){
      var encontrou = false;
      var termo = $(this).val().toLowerCase();
      $('table > tbody > tr').each(function(){
        $(this).find('td').each(function(){
          if($(this).text().toLowerCase().indexOf(termo) > -1) encontrou = true;
        });
        if(!encontrou) $(this).hide();
        else $(this).show();
        encontrou = false;
      });
    });

    $("table") 
    .tablesorter({
      dateFormat: 'uk',
      headers: {
        0: {
          sorter: false
        },
        5: {
          sorter: false
        }
      }
    }) 
    .tablesorterPager({container: $("#pager")})
    .bind('sortEnd', function(){
      $('table > tbody > tr').removeClass('odd');
      $('table > tbody > tr:odd').addClass('odd');
    });

  });

